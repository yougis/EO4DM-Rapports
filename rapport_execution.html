<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hugo Roussaffa">
<meta name="keywords" content="Sécheresse végétale, Pacifique Sud, Observation de la Terre">

<title>Suivi de la sécheresse dans les territoires insulaire du Pacifique</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="rapport_execution_files/libs/clipboard/clipboard.min.js"></script>
<script src="rapport_execution_files/libs/quarto-html/quarto.js"></script>
<script src="rapport_execution_files/libs/quarto-html/popper.min.js"></script>
<script src="rapport_execution_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="rapport_execution_files/libs/quarto-html/anchor.min.js"></script>
<link href="rapport_execution_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="rapport_execution_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="rapport_execution_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="rapport_execution_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="rapport_execution_files/libs/bootstrap/bootstrap-def314685997ae775ed87effcd90cd1a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#contexte-général-du-projet" id="toc-contexte-général-du-projet" class="nav-link active" data-scroll-target="#contexte-général-du-projet"><span class="header-section-number">1</span> Contexte général du projet</a></li>
  <li><a href="#description-du-projet-suivi-de-la-sécheresse-dans-les-territoires-insulaire-du-pacifique" id="toc-description-du-projet-suivi-de-la-sécheresse-dans-les-territoires-insulaire-du-pacifique" class="nav-link" data-scroll-target="#description-du-projet-suivi-de-la-sécheresse-dans-les-territoires-insulaire-du-pacifique"><span class="header-section-number">2</span> Description du projet “Suivi de la sécheresse dans les territoires insulaire du Pacifique”</a>
  <ul class="collapse">
  <li><a href="#parties-prenantes" id="toc-parties-prenantes" class="nav-link" data-scroll-target="#parties-prenantes"><span class="header-section-number">2.1</span> Parties prenantes</a></li>
  <li><a href="#méthodologie" id="toc-méthodologie" class="nav-link" data-scroll-target="#méthodologie"><span class="header-section-number">2.2</span> Méthodologie</a>
  <ul class="collapse">
  <li><a href="#vai-la-chaine-locale" id="toc-vai-la-chaine-locale" class="nav-link" data-scroll-target="#vai-la-chaine-locale"><span class="header-section-number">2.2.1</span> VAI : La chaine locale</a></li>
  <li><a href="#vhi-la-chaine-globale" id="toc-vhi-la-chaine-globale" class="nav-link" data-scroll-target="#vhi-la-chaine-globale"><span class="header-section-number">2.2.2</span> VHI : La chaine globale</a></li>
  <li><a href="#mai-la-chaine-dalerte" id="toc-mai-la-chaine-dalerte" class="nav-link" data-scroll-target="#mai-la-chaine-dalerte"><span class="header-section-number">2.2.3</span> MAI : La chaine d’alerte</a></li>
  <li><a href="#indicateur-prévisionnel" id="toc-indicateur-prévisionnel" class="nav-link" data-scroll-target="#indicateur-prévisionnel"><span class="header-section-number">2.2.4</span> Indicateur prévisionnel</a></li>
  <li><a href="#actualisation-et-livraison-des-produits" id="toc-actualisation-et-livraison-des-produits" class="nav-link" data-scroll-target="#actualisation-et-livraison-des-produits"><span class="header-section-number">2.2.5</span> Actualisation et livraison des produits</a></li>
  <li><a href="#etudes-complémentaires-réalisées-au-cours-du-projet" id="toc-etudes-complémentaires-réalisées-au-cours-du-projet" class="nav-link" data-scroll-target="#etudes-complémentaires-réalisées-au-cours-du-projet"><span class="header-section-number">2.2.6</span> Etudes complémentaires réalisées au cours du projet</a></li>
  </ul></li>
  <li><a href="#outils-et-technologies-utilisés" id="toc-outils-et-technologies-utilisés" class="nav-link" data-scroll-target="#outils-et-technologies-utilisés"><span class="header-section-number">2.3</span> Outils et technologies utilisés</a>
  <ul class="collapse">
  <li><a href="#télédétection-à-partir-de-données-accessibles" id="toc-télédétection-à-partir-de-données-accessibles" class="nav-link" data-scroll-target="#télédétection-à-partir-de-données-accessibles"><span class="header-section-number">2.3.1</span> Télédétection à partir de données accessibles</a></li>
  <li><a href="#utilisation-du-langage-python-pour-le-développement-des-chaines-de-traitement" id="toc-utilisation-du-langage-python-pour-le-développement-des-chaines-de-traitement" class="nav-link" data-scroll-target="#utilisation-du-langage-python-pour-le-développement-des-chaines-de-traitement"><span class="header-section-number">2.3.2</span> Utilisation du langage Python pour le développement des chaines de traitement</a></li>
  <li><a href="#utilisation-du-langage-r-pour-le-développement-de-la-chaine-prévisionnelle" id="toc-utilisation-du-langage-r-pour-le-développement-de-la-chaine-prévisionnelle" class="nav-link" data-scroll-target="#utilisation-du-langage-r-pour-le-développement-de-la-chaine-prévisionnelle"><span class="header-section-number">2.3.3</span> Utilisation du langage R pour le développement de la chaine prévisionnelle</a></li>
  <li><a href="#utilisation-de-google-earth-engine" id="toc-utilisation-de-google-earth-engine" class="nav-link" data-scroll-target="#utilisation-de-google-earth-engine"><span class="header-section-number">2.3.4</span> Utilisation de Google Earth Engine</a></li>
  <li><a href="#utilisation-de-docker-pour-lorchestration-des-chaines-de-traitement" id="toc-utilisation-de-docker-pour-lorchestration-des-chaines-de-traitement" class="nav-link" data-scroll-target="#utilisation-de-docker-pour-lorchestration-des-chaines-de-traitement"><span class="header-section-number">2.3.5</span> Utilisation de docker pour l’orchestration des chaines de traitement</a></li>
  <li><a href="#utilisation-de-azure-devops" id="toc-utilisation-de-azure-devops" class="nav-link" data-scroll-target="#utilisation-de-azure-devops"><span class="header-section-number">2.3.6</span> Utilisation de Azure devops</a></li>
  <li><a href="#déploiement-continu-cicd" id="toc-déploiement-continu-cicd" class="nav-link" data-scroll-target="#déploiement-continu-cicd"><span class="header-section-number">2.3.7</span> Déploiement continu (CI/CD)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#déroulement-du-projet" id="toc-déroulement-du-projet" class="nav-link" data-scroll-target="#déroulement-du-projet"><span class="header-section-number">3</span> Déroulement du projet</a>
  <ul class="collapse">
  <li><a href="#phasage-du-projet" id="toc-phasage-du-projet" class="nav-link" data-scroll-target="#phasage-du-projet"><span class="header-section-number">3.1</span> Phasage du projet</a></li>
  <li><a href="#bilan-des-actions-réalisées" id="toc-bilan-des-actions-réalisées" class="nav-link" data-scroll-target="#bilan-des-actions-réalisées"><span class="header-section-number">3.2</span> Bilan des actions réalisées</a>
  <ul class="collapse">
  <li><a href="#exemple-de-résultats-obtenus" id="toc-exemple-de-résultats-obtenus" class="nav-link" data-scroll-target="#exemple-de-résultats-obtenus"><span class="header-section-number">3.2.1</span> Exemple de résultats obtenus</a></li>
  <li><a href="#proposition-pour-la-valorisation-des-résultats-des-chaines" id="toc-proposition-pour-la-valorisation-des-résultats-des-chaines" class="nav-link" data-scroll-target="#proposition-pour-la-valorisation-des-résultats-des-chaines"><span class="header-section-number">3.2.2</span> Proposition pour la valorisation des résultats des chaines</a></li>
  <li><a href="#livrables" id="toc-livrables" class="nav-link" data-scroll-target="#livrables"><span class="header-section-number">3.2.3</span> Livrables</a></li>
  <li><a href="#réunions-et-échanges" id="toc-réunions-et-échanges" class="nav-link" data-scroll-target="#réunions-et-échanges"><span class="header-section-number">3.2.4</span> Réunions et échanges</a></li>
  <li><a href="#restitutions-publiques" id="toc-restitutions-publiques" class="nav-link" data-scroll-target="#restitutions-publiques"><span class="header-section-number">3.2.5</span> Restitutions publiques</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#sec-Annexes" id="toc-sec-Annexes" class="nav-link" data-scroll-target="#sec-Annexes"><span class="header-section-number">4</span> Annexes</a>
  <ul class="collapse">
  <li><a href="#sec-readmeEO4DM" id="toc-sec-readmeEO4DM" class="nav-link" data-scroll-target="#sec-readmeEO4DM"><span class="header-section-number">4.1</span> Documentation des chaines de traitement</a></li>
  <li><a href="#sec-readmePrevision" id="toc-sec-readmePrevision" class="nav-link" data-scroll-target="#sec-readmePrevision"><span class="header-section-number">4.2</span> Documentation des chaines de traitement</a></li>
  <li><a href="#sec-dependencies" id="toc-sec-dependencies" class="nav-link" data-scroll-target="#sec-dependencies"><span class="header-section-number">4.3</span> Dépendances python des chaines version 1.0.0</a></li>
  <li><a href="#etudes-réalisées" id="toc-etudes-réalisées" class="nav-link" data-scroll-target="#etudes-réalisées"><span class="header-section-number">4.4</span> Etudes réalisées</a>
  <ul class="collapse">
  <li><a href="#sec-gapfilling" id="toc-sec-gapfilling" class="nav-link" data-scroll-target="#sec-gapfilling"><span class="header-section-number">4.4.1</span> Etude gapfilling Landsat 7</a></li>
  </ul></li>
  <li><a href="#sec-cq" id="toc-sec-cq" class="nav-link" data-scroll-target="#sec-cq"><span class="header-section-number">4.5</span> Aide au contrôle qualité des données des chaines</a></li>
  <li><a href="#restitution---pgrsc" id="toc-restitution---pgrsc" class="nav-link" data-scroll-target="#restitution---pgrsc"><span class="header-section-number">4.6</span> Restitution - PGRSC</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Autres formats</h2><ul><li><a href="rapport_execution.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Suivi de la sécheresse dans les territoires insulaire du Pacifique</h1>
<p class="subtitle lead">Rapport d’exécution technique</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Auteur·rice</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Hugo Roussaffa </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            OEIL - Observatoire de l’Environnement en Nouvelle-Calédonie
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">24-03-2025</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Résumé</div>
    Conformément aux exigences de la convention AFD CNC 226 01 S passée entre l’AFD et l’OEIL, ce rapport présente les résultats et les livrables obtenus dans le cadre du projet de suivi de la sécheresse dans les territoires insulaires du Pacifique. Il comprend une description des objectifs, de la méthodologie, des résultats, des livrables. Le rapport est accompagné d’annexes comprenant des informations complémentaires, des graphiques et des tableaux.
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Mots clés</div>
    <p>Sécheresse végétale, Pacifique Sud, Observation de la Terre</p>
  </div>
</div>

</header>


<div>

</div>
<div class="centering quarto-layout-panel" data-layout-ncol="3" data-latex="">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="ressources/logos/OEIL.png" class="img-fluid"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="ressources/logos/logo_fond_pacifique.png" class="img-fluid"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="ressources/logos/AFD.png" class="img-fluid"></p>
</div>
</div>
</div>
<section id="contexte-général-du-projet" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Contexte général du projet</h1>
<p>Les évènements extrêmes de plus en plus présents dans le Pacifique (phénomènes El Nino &amp; La Nina) ont des conséquences non négligeables sur les territoires insulaires. L’effet de la montée des eaux ou des épisodes de sécheresse est donc au centre des préoccupation dans de nombreuses îles du Pacifique (Vanuatu, Wallis-et-Futuna, Polynésie Française, etc.). Les évènements de sécheresse intenses ont des impacts indéniables sur la biodiversité, la ressource en eau et sur les cultures agricoles comme cela a pu être le cas en 2019 pour la Nouvelle-Calédonie.</p>
<p>Actuellement, le suivi et l’anticipation de ces épisodes de sécheresse se fait via des mesures météorologiques informant sur le déficit pluvieux et non pas sur le stress hydrique des plantes. Par ailleurs, les données sont uniquement disponibles sur quelques points de mesure et ne sont pas continues sur les territoires.</p>
</section>
<section id="description-du-projet-suivi-de-la-sécheresse-dans-les-territoires-insulaire-du-pacifique" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Description du projet “Suivi de la sécheresse dans les territoires insulaire du Pacifique”</h1>
<p>Le projet proposé ici s’inscrit dans la continuité du travail mené dans le cadre du projet Space Climate Observatory, nommé EO4DroughtMonitoring<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> sur la Nouvelle-Calédonie avec comme objectif principal de démontrer l’applicabilité et l’utilité d’un tel outil dans d’autres territoires insulaires du Pacifique. La démarche globale est ainsi de disposer d’un procédé adapté pour l’ensemble des territoires insulaires du Pacifique et qui pourrait par la suite être délivré en libre accès de façon opérationnelle en lien avec les acteurs centraux de la région.</p>
<p>Le projet présenté ici vise&nbsp;:</p>
<ul>
<li>à construire un indicateur de sécheresse végétale permettant de caractériser la situation actuelle mais aussi historique et prévisionnelle, en fonction des données disponibles, obtenues sur les différents plateformes satellitaires et des instruments météorologiques du territoires concernés,</li>
<li>mettre en production l’indicateur sur la Nouvelle-Calédonie, l’objectif étant de démontrer le caractère opérationnel de la solution,</li>
<li>décliner la chaine de production pour certains territoires de la région Pacifique,</li>
<li>le valoriser à travers des interfaces et des services de consultation et de mise à disposition des données.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/presentation_generale.png" class="img-fluid figure-img"></p>
<figcaption>présentation générale du système</figcaption>
</figure>
</div>
<p>Cette solution fournit des données constituant une source d’informations importante dont les valorisations et apports peuvent être multiples : agriculture, gestion des ressources, sécurité civile (surveillance du risque incendie), état de l’environnement. Les produits satellites utilisés dans cet outil couvrent l’intégralité des territoires. L’ensemble des livrables est mis à disposition de la communauté sous licence open source type BSD<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<section id="parties-prenantes" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="parties-prenantes"><span class="header-section-number">2.1</span> Parties prenantes</h2>
<p>Le projet implique plusieurs partenaires techniques et scientifiques, notamment l’OEIL, INSIGHT, l’IRD Nouvelle-Calédonie, Météo-France Nouvelle-Calédonie, CSIRO, CPS, la Polynésie Française, Fidji et le Vanuatu.</p>
<p>Le travail est mené par 3 entités principales :</p>
<p><strong>L’Observatoire de l’Environnement pour la Nouvelle-Calédonie (OEIL)</strong> réalise le suivi de l’environnement sur le territoire en fournissant, via leurs plateformes opérationnelles, plusieurs indicateurs et outils de surveillance environnementale. Porteur du projet, l’OEIL a le rôle de cadrage global du projet, de valorisation et de portage final de l’indicateur sécheresse développé pour la NC. Grâce à son expertise dans le domaine, il s’assurera également du bon déroulement du travail mené par les différents partenaires sur les aspects techniques, thématiques via un soutien scientifique du <strong>Conseil Scientifique de l’OEIL</strong>.</p>
<p><strong>INSIGHT</strong> est une startup néo-calédonienne du Groupe CIPAC (Compagnie Industrielle du Pacifique) dédiée à l’observation de la Terre par imagerie spatiale. INSIGHT a été en charge des développements de l’indicateur de sécheresse biophysique sur la Nouvelle-Calédonie, en collaboration avec Météo-France NC au moment du projet SCO. Dans la présente étude, INSIGHT est en charge de la mise en production des différentes chaines d’indicateur sur la Nouvelle-Calédonie, d’études techniques et scientifiques, et des développements supplémentaires pour l’accès et le traitement d’images satellites sur tous les territoires identifiés.</p>
<p><strong>L’IRD Nouvelle-Calédonie (UMR EspaceDEV)</strong> apporte un soutien scientifique et technique à ce projet. De par son expertise en Observation de la Terre dédiée à l’étude de l’environnement Néo-Calédonien, cet organisme de recherche suivra de près les développements réalisés pour aider au bon déroulement du projet.</p>
<p>D’autres acteurs ont été identifiés pour être sollicités au cours de l’étude afin de disposer d’un soutien technique et thématique : <strong>METEO-FRANCE NOUVELLE-CALEDONIE</strong>, en tant que le développeur actuel de la chaine des prévisions. Une convention avec Météo-France sur l’utilisation de la chaine en production et sur d’autres territoires a été signée (disponible en annexe <span class="math inline">\(\ref{sec-conv-MNF-OEIL}\)</span>)</p>
<p><strong>CSIRO</strong> : expertise attendue dans l’exploitation des données Radar et du DataCube Australien.</p>
<p><strong>CPS</strong> : expertise attendue sur l’exploitation du DataCube Digital Earth Pacifique.</p>
<p><strong>La Polynésie Française</strong> : utilisateur potentiel des données d’indicateurs produites et collaboration attendue pour la mise à disposition de données météo in situ.</p>
<p><strong>Le Vanuatu</strong> : utilisateur potentiel des données d’indicateurs produites et collaboration attendue pour la mise à disposition de données météo in situ.</p>
<p><strong>AGENCE RURALE Nouvelle Calédonie</strong> : utilisateur potentiel des données d’indicateurs produites.</p>
</section>
<section id="méthodologie" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="méthodologie"><span class="header-section-number">2.2</span> Méthodologie</h2>
<p>La chaine de production sur la Nouvelle-Calédonie est présentée en <a href="#fig-schema-general" class="quarto-xref">Figure&nbsp;1</a>. La production de l’indicateur actuel est réalisée via trois sous chaines permettant d’accéder aux trois niveaux d’information sécheresse (communal, intra-communal, parcellaire).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/EO4DM_Echelles.jpg" class="img-fluid figure-img"></p>
<figcaption>3 échelles d’information sécheresse</figcaption>
</figure>
</div>
<p>L’ensemble des chaines forme un système de suivi et de prévision de la sécheresse dans les territoires du Pacifique. Chaque chaine est composée de plusieurs étapes de traitement, de calcul et de contrôle qualité. Les données d’entrée sont issues de différentes sources (satellites, données météo in situ, etc.) et sont traitées pour produire des indicateurs de sécheresse végétale (VAI, VHI, MAI, prévision).</p>
<div id="fig-schema-general" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-schema-general-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/SCHEMA_GENERAL_EO4DM.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-schema-general-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Le système de suivi et la prévision de la sécheresse dans les territoires du Pacifique
</figcaption>
</figure>
</div>
<section id="vai-la-chaine-locale" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="vai-la-chaine-locale"><span class="header-section-number">2.2.1</span> VAI : La chaine locale</h3>
<p>La chaine locale fournit l’indicateur au niveau parcellaire (10 m), calculé à partir des indices NDWI issus de L7, L8, L9 et S2 préalablement pré-traités et calibrés. L’indicateur VAI (Vegetation Anomaly Index ; Amri et al., 2011 ; Peters et al., 2002) sera estimé par comparaison au référentiel selon l’équation</p>
<p><span class="math display">\[
VAI = NDWI - \frac{\overline{NDWI}} {\sigma NDWI}
\]</span></p>
<p>avec <span class="math inline">\(\overline{NDWI}\)</span> la moyenne et <span class="math inline">\(\sigma{NDWI}\)</span> l’écart-type calculés pour une décade (10 jours), sur tout l’historique. Cet indicateur est centré en 0, avec des valeurs négatives indiquant un état de stress anormal, et des valeurs positives indiquant un état favorable. A noter que pour cette échelle spécifique, une phase de post-traitement peut être intégrée afin de filtrer les régions de sols nus ou à végétation dense pouvant être d’un intérêt moindre pour un suivi parcellaire. Cette étape peut être réalisée à partir d’indices de NDVI calculés à partir des mêmes images L7/L8/L9/S2, mais impliquant également, une calibration radiométrique.</p>
</section>
<section id="vhi-la-chaine-globale" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="vhi-la-chaine-globale"><span class="header-section-number">2.2.2</span> VHI : La chaine globale</h3>
<p>La chaine globale fournit l’indicateur au niveau intra-communal (1 km) à partir des indices MODIS (NDWI, LST). Ici, l’indicateur VHI (Vegetation Health Index ; Kogan, 1997, 2000) est estimé selon l’équation suivante : <span class="math display">\[
VHI = \alpha * VCI + (1-\alpha) * TCI
\]</span></p>
<p>avec <span class="math inline">\(\alpha = 0.5\)</span>, et où le VCI et le TCI sont définis selon Kogan (1995, 1997) et obtenus respectivement à partir du NDWI et de la LST. Les TCI sont les <em>Temperature Condition Index</em> (raster) obtenus à partir des températures LST MODIS : <span class="math inline">\(TCI = (LSTmax – LST) / (LSTmax – LSTmin)\)</span> Les VCI sont les <em>Vegetation Condition Index</em> (raster) obtenus à partir des indices NDWI MODIS : <span class="math inline">\(VCI = (NDWI – NDWImin) / (NDWImax – NDWImin)\)</span></p>
<p>Cet indicateur est centré en 0,5. Un VHI de 0 correspondra à l’état le plus défavorable (végétation sèche), alors qu’une valeur de 1 correspondra à l’état le plus favorable (végétation en bonne santé).</p>
</section>
<section id="mai-la-chaine-dalerte" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="mai-la-chaine-dalerte"><span class="header-section-number">2.2.3</span> MAI : La chaine d’alerte</h3>
<p>La chaine d’alerte fournit un indicateur communal issu de la combinaison d’indicateurs satellites et météorologiques. L’objectif ici est de déterminer à quel stade se situe le déficit dans la relation de cause à effet de la sécheresse agricole (Sepulcre-Canto, 2012) : un déficit pluviométrique entraînant un déficit d’humidité du sol, ayant lui-même pour effet le stress hydrique de la végétation. Pour cela, nous intégrons les indicateurs fournis par Météo-France sur leurs stations (SPI, SPEI), l’indicateur VHI ainsi que l’indicateur d’anomalies d’humidités du sol MAI (Moisture Anomaly Index ; Amri et al., 2012 ; Le Page et Zribi, 2019), provenant des données micro-ondes ASCAT.</p>
<p>Trois niveaux d’alerte sécheresse seront alors fournis par commune :</p>
<ul>
<li><p><strong>Watch</strong> : Niveau d’alerte minimale correspondant à une détection de déficit pluviométrique, mais sans impact observé sur la surface végétalisé.</p></li>
<li><p><strong>Warning</strong> : Niveau intermédiaire avec détection de déficit observé au niveau de la surface (humidité du sol, évapotranspiration), mais sans stress hydrique directement observé sur la végétation.</p></li>
<li><p><strong>Alert</strong> : Niveau d’alerte maximale avec détection d’un état de stress hydrique de la végétation.</p></li>
</ul>
</section>
<section id="indicateur-prévisionnel" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="indicateur-prévisionnel"><span class="header-section-number">2.2.4</span> Indicateur prévisionnel</h3>
<p>L’indicateur prévisionnel est issu des développements réalisés par Météo-France NC. Le produit se présente sous la forme de cartes à l’échelle communale informant sur les tendances d’évolution de la sécheresse végétale à +1 mois, +2 mois et +3 mois (à partir du mois en cours). Cet indicateur est obtenu à partir de la connaissance de deux types d’informations : - La forte corrélation observée entre les produits de sécheresse météorologique (en particulier le SPI-3 mois issus des stations) et l’indicateur global de sécheresse végétale (produit satellite VHI). Le SPI-3 mois est alors qualifié de « proxy » météorologique de la sécheresse végétale. - Les prévisions de précipitation informant sur les probabilités d’évolution de SPI (Lavaysse, 2020). Ces produits correspondent aux prévisions d’ensemble accessibles via le Global Drought Observatory, et qui ont été évaluées et calibrées localement via les données SPI issues des stations (réadaptation des scores et classes d’évolution au territoire).</p>
<hr>
<p>Ces 4 indicateurs peuvent ensuite être utilisés pour étudier, surveiller, analyser et prévoir les périodes de sécheresse dans les territoires monitorés.</p>
<p>L’algorithmie de chaque chaine est détaillée précisément dans la <a href="#fig-algo-chaines" class="quarto-xref">Figure&nbsp;2</a>.</p>
<div id="fig-algo-chaines" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-algo-chaines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ALGO_CHAINES_EO4DM.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-algo-chaines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Déscription du fonctionnement détaillée des chaines
</figcaption>
</figure>
</div>
<p>La méthodologie pour les développements et validations scientifiques des indicateurs et des chaines de traitement est détaillée dans les rapports de production du projet SCO. Nous invitons le lecteur à se référer à ces rapports pour tout complément d’information à ce sujet: - <a href="https://oeil.nc/cdrn/index.php/resource/bibliographie/view/30656">RAPPORT MI-PARCOURS</a> - <a href="https://oeil.nc/cdrn/index.php/resource/bibliographie/view/30655">RAPPORT FINAL</a></p>
</section>
<section id="actualisation-et-livraison-des-produits" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="actualisation-et-livraison-des-produits"><span class="header-section-number">2.2.5</span> Actualisation et livraison des produits</h3>
<p>Afin de limiter l’impact des nuages sur les produits satellites tout en gardant une répétitivité adaptée à l’évolution de la sécheresse, le pas de temps sélectionné pour l’actualisation de l’indicateur de sécheresse locale (VAI) est de 10 jours, et de 8 jours pour l’indicateur de sécheresse globale (VHI).</p>
<p>Du fait de la mise à disposition des données météorologiques à un pas de temps mensuel, les cartes d’alertes et cartes de prévisions seront fournits au mois (milieu du mois suivant).</p>
<p>Les données météorologiques, incluant les produits observés (SPI, SPEI) et le les produits prévisionnels (tendances d’évolution), sont déposées par Météo-France NC sur un serveur dédié. L’accès à ce serveur se fait à travers un accès ftp fournis dans le cadre de la convention <span class="math inline">\(\ref{sec-conv-MNF-OEIL}\)</span>, et se chargera de récupérer les fichiers autour du 15 du mois suivant, date à laquelle les données seront complètes et validées par Météo-France.</p>
<p>Le chronogramme ci-dessous <a href="#fig-chronogramme" class="quarto-xref">Figure&nbsp;3</a> présente l’actualisation des indicateurs sur deux mois. Ce schéma est répété de manière à couvrir la totalité de la période en mode opérationnel. Il s’agit notamment de mettre en évidence la procédure de mise à disposition des produits pour leur production et leur diffusion opérationnelle.</p>
<div id="fig-chronogramme" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-chronogramme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/chronogramme.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-chronogramme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Chronogramme de l’actualisation des produits
</figcaption>
</figure>
</div>
<ul>
<li>Livraison 1, au début du mois 2 incluant les produits infra-mensuels :
<ul>
<li>indicateurs de sécheresse locale VAI obtenus durant le mois 1</li>
<li>indicateurs de sécheresse globale VHI obtenus durant le mois 1</li>
</ul></li>
<li>Livraison 1bis, en milieu du mois 2 incluant :
<ul>
<li>les produits mensuels d’alertes du mois 1</li>
<li>les produits mensuels de prévisions du mois 1</li>
<li>une synthèse mensuelle des indicateurs VAI et VHI agrégés sur le mois 1</li>
</ul></li>
<li>La livraison 2, en début du mois 3 incluant les produits infra-mensuels VAI et VHI du mois 2</li>
</ul>
</section>
<section id="etudes-complémentaires-réalisées-au-cours-du-projet" class="level3" data-number="2.2.6">
<h3 data-number="2.2.6" class="anchored" data-anchor-id="etudes-complémentaires-réalisées-au-cours-du-projet"><span class="header-section-number">2.2.6</span> Etudes complémentaires réalisées au cours du projet</h3>
<p>Le projet à permis d’améliorer la chaine issu du SCO, sur certains points méthodologiques à travers la réalisation des études suivantes :</p>
<ul>
<li><p>Intégration des données de Landsat 9 dans la chaine de production</p></li>
<li><p>Étude d’une solution de gapfilling pour les données Landsat 7</p></li>
<li><p>Etude pour le choix du DataCube (GEE, Sentinel Hub, Data-Terra, Digital Earth Pacific)</p></li>
<li><p>Etude pour l’intégration du capteur VIIRS en remplacement de MODIS</p></li>
<li><p>Etude pour l’intégration du produit CHIRPS pour le calcul des indices SPI et SPEI</p></li>
</ul>
<p>Ces études font partie des livrables du projet et sont disponibles en annexe Section <span class="math inline">\(\ref{Annexes}\)</span>.</p>
</section>
</section>
<section id="outils-et-technologies-utilisés" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="outils-et-technologies-utilisés"><span class="header-section-number">2.3</span> Outils et technologies utilisés</h2>
<section id="télédétection-à-partir-de-données-accessibles" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="télédétection-à-partir-de-données-accessibles"><span class="header-section-number">2.3.1</span> Télédétection à partir de données accessibles</h3>
<p>Le projet repose sur l’utilisation de données open data pour la télédétection de la sécheresse végétale. Ces données sont essentielles pour l’analyse et la surveillance des variations de la santé de la végétation, de l’humidité et la température.</p>
<ul>
<li>Landsat 7, 8, 9 et Sentinel 2 pour l’optique multispectrale (NDVI, NDWI)</li>
<li>MODIS: Aqua, Terra pour le thermique</li>
<li>ASCAT pour les micro-ondes</li>
</ul>
</section>
<section id="utilisation-du-langage-python-pour-le-développement-des-chaines-de-traitement" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="utilisation-du-langage-python-pour-le-développement-des-chaines-de-traitement"><span class="header-section-number">2.3.2</span> Utilisation du langage Python pour le développement des chaines de traitement</h3>
<p>Le langage Python est utilisé pour le développement des chaines de traitement. Il est largement utilisé dans le domaine de la télédétection et de l’analyse de données. De plus, nous utilisons conda pour la gestion des dépendances et des environnements virtuels de développement, de qualification et de production. Les dépendances de la version 1.0.0 sont disponible en <a href="#sec-dependencies" class="quarto-xref">Section&nbsp;4.3</a>.</p>
<p>La documentation de l’ensemble des chaines de traitement est disponible sur le dépôt git de l’OEIL et en annexe <a href="#sec-readmeEO4DM" class="quarto-xref">Section&nbsp;4.1</a></p>
</section>
<section id="utilisation-du-langage-r-pour-le-développement-de-la-chaine-prévisionnelle" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="utilisation-du-langage-r-pour-le-développement-de-la-chaine-prévisionnelle"><span class="header-section-number">2.3.3</span> Utilisation du langage R pour le développement de la chaine prévisionnelle</h3>
<p>Le langage R est utilisé pour le développement de la chaine prévisionnelle. R est un langage de programmation et un environnement logiciel utilisé pour le traitement statistique et graphique des données. Il est largement utilisé dans le domaine de la météorologie et de la climatologie pour l’analyse et la modélisation des données météorologiques. La documentation de la chaine prévisionnelle est disponible en <a href="#sec-readmePrevision" class="quarto-xref">Section&nbsp;4.2</a></p>
</section>
<section id="utilisation-de-google-earth-engine" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="utilisation-de-google-earth-engine"><span class="header-section-number">2.3.4</span> Utilisation de Google Earth Engine</h3>
<p>Google Earth Engine est utilisé pour accéder aux sources de données et pour réaliser certains traitements sur les données satellitaires. Cette plateforme cloud permet d’analyser de grandes quantités de données géospatiales de manière efficace et rapide.</p>
</section>
<section id="utilisation-de-docker-pour-lorchestration-des-chaines-de-traitement" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="utilisation-de-docker-pour-lorchestration-des-chaines-de-traitement"><span class="header-section-number">2.3.5</span> Utilisation de docker pour l’orchestration des chaines de traitement</h3>
<p>Docker est utilisé pour l’orchestration des chaînes de traitement. Cette technologie de conteneurisation garantit la portabilité et la reproductibilité des environnements de développement, facilitant ainsi le déploiement et la gestion des applications.</p>
</section>
<section id="utilisation-de-azure-devops" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="utilisation-de-azure-devops"><span class="header-section-number">2.3.6</span> Utilisation de Azure devops</h3>
<p>Azure DevOps est une suite d’outils utilisés dans le cadre du projet pour le déploiement des chaînes de traitement (CI), la gestion de projet, la collaboration, la gestion du code source (GIT), la documentation, le suivi des version, des bugs et des évolutions.</p>
</section>
<section id="déploiement-continu-cicd" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="déploiement-continu-cicd"><span class="header-section-number">2.3.7</span> Déploiement continu (CI/CD)</h3>
<p>Une pipeline a été développé pour automatiser les tests, la compilation, la validation et le déploiement des applications de manière reproductible. C’est cette “brique” qui permet de paramétrer et d’orchestrer le déploiement en production de l’ensemble des chaine.</p>
</section>
</section>
</section>
<section id="déroulement-du-projet" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Déroulement du projet</h1>
<section id="phasage-du-projet" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="phasage-du-projet"><span class="header-section-number">3.1</span> Phasage du projet</h2>
<ul>
<li><strong>Phase 0</strong> (Septembre 2022 – Mars 2023): Réunion de démarrage, montée en compétence et, études préalables.</li>
<li><strong>Phase 1</strong> (Janvier 2023 – Septembre 2023): Adaptation de la chaine développée pendant le projet SCO <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> pour la Nouvelle-Calédonie.</li>
<li><strong>Phase 2</strong> (Septembre 2023 – Janvier 2024): Adaptations et évolutions de la chaine pour Fidji, la Polynésie Française et le Vanuatu Pacifique.</li>
<li><strong>Phases 3</strong> (Juin 2023 – Avril 2024) : Orchestration de la chaine et monitoring.</li>
<li><strong>Phases 4</strong> (Décembre 2023 – Août 2024): Restitutions, finalisation.</li>
</ul>
</section>
<section id="bilan-des-actions-réalisées" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="bilan-des-actions-réalisées"><span class="header-section-number">3.2</span> Bilan des actions réalisées</h2>
<p>Le développement et la mise en production du système sécheresse végétale est effectif. Les indicateurs VAI (locale), VHI (globale) et d’alerte MAI pour la Nouvelle-Calédonie sont produits de manière continue sur le serveur hébergé par INSIGHT. Les indicateurs ne sont pas encore accessibles directement par une interface web de consultation et de téléchargement mais ce point est en cours de réflexion. La chaine prévisionnelle vient d’être finalisée et demande encore un effort pour son intégration dans le système. Ce point est en cours de mise en oeuvre.</p>
<p>La collaboration entre les différents partenaires techniques et scientifiques de la région pacifique ont bien eu lieu à travers des échanges et de restitutions. Nous avons adapté les chaines de traitement et produit les indicateurs pour certaines partie du territoire de Fidji, du Vanuatu et de la Polynésie Française. Le système n’a toutefois pas les indicateur nécessitant des données météo in situ (alerte et prévision).</p>
<section id="exemple-de-résultats-obtenus" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="exemple-de-résultats-obtenus"><span class="header-section-number">3.2.1</span> Exemple de résultats obtenus</h3>
<div id="fig-cartes201812" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cartes201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201812" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VAI201812" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VAI201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VAI_20181201_20.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201812">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VAI201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) carte VAI 2018/12
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201812" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VHI201812" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VHI201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VHI_201812.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201812">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VHI201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) carte VHI 2018/12
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cartes201812-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Comparaison des cartes VAI et VHI pour le mois de décembre 2018
</figcaption>
</figure>
</div>
<div id="fig-cartes201904" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cartes201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201904" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VAI201904" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VAI201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VAI_20190401_20.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201904">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VAI201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) carte VAI 2019/04
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201904" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VHI201904" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VHI201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VHI_201904.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201904">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VHI201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) carte VHI 2019/04
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cartes201904-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Comparaison des cartes VAI et VHI pour le mois d’avril 2019
</figcaption>
</figure>
</div>
<div id="fig-cartes201912" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cartes201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201912" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VAI201912" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VAI201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VAI_20191201_20.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201912">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VAI201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) carte VAI 2019/12
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cartes201912" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-carte-VHI201912" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-carte-VHI201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/ex_carte_VHI_201912.png" class="img-fluid figure-img" data-ref-parent="fig-cartes201912">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-carte-VHI201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) carte VHI 2019/12
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cartes201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Comparaison des cartes VAI et VHI pour le mois de décembre 2019
</figcaption>
</figure>
</div>
<div id="fig-cartes201912" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cartes201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/VHI_FIDJI.png" class="img-fluid figure-img"></p>
<figcaption>carte VHI FIDJI</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/VHI_PF.png" class="img-fluid figure-img"></p>
<figcaption>carte VHI Vanuatu</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/VHI_Vanuatu.png" class="img-fluid figure-img"></p>
<figcaption>carte VHI Polynesie</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cartes201912-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Cartes VHI sur les territoires de la région Pacifique
</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/evo_moyenne_VHI_mois.png" class="img-fluid figure-img"></p>
<figcaption>Evolution temporelle des moyennes de VHI par commune et par mois</figcaption>
</figure>
</div>
</section>
<section id="proposition-pour-la-valorisation-des-résultats-des-chaines" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="proposition-pour-la-valorisation-des-résultats-des-chaines"><span class="header-section-number">3.2.2</span> Proposition pour la valorisation des résultats des chaines</h3>
<section id="catalogue-stac-spatiotemporal-asset-catalog" class="level4" data-number="3.2.2.1">
<h4 data-number="3.2.2.1" class="anchored" data-anchor-id="catalogue-stac-spatiotemporal-asset-catalog"><span class="header-section-number">3.2.2.1</span> Catalogue STAC (SpatioTemporal Asset Catalog)</h4>
<p>Rendre l’accès aux données facilitée via la mise en place d’un catalogue STAC (SpatioTemporal Asset Catalog) pour permettre aux utilisateurs de découvrir, explorer et accéder aux données de manière efficace.</p>
<p><img src="ressources/STAC_CATALOG.png" class="img-fluid" alt="Interface de l’application webSTAC BROWSER permettant de rechercher dans le catalogue"> <img src="ressources/STAC_BROWSER.png" class="img-fluid" alt="Ecran de l’application STAC BROWSER pour une donnée spécifique"></p>
<p>Ce type de catalogue permettrait par ailleurs de faciliter le partage et le moissonnage par d’autre plateforme comme la plateforme Data du Gouvernement de Nouvelle Calédonie et/ou le Pacifique Data Hub mis en place par la CPS.</p>
</section>
<section id="intégration-des-données-dans-le-cube-digital-earth-pacific" class="level4" data-number="3.2.2.2">
<h4 data-number="3.2.2.2" class="anchored" data-anchor-id="intégration-des-données-dans-le-cube-digital-earth-pacific"><span class="header-section-number">3.2.2.2</span> Intégration des données dans le cube Digital Earth Pacific</h4>
<p>La récente mise en production du DataCube Digital Earth Pacific offre une opportunité pour intégrer les données de sécheresse végétale dans ce cube. Cette intégration permettrait de faciliter l’accès et l’exploitation des données par les utilisateurs finaux, notamment les décideurs et les gestionnaires de ressources naturelles.</p>
<p>Des échanges avec la CPS sont prévus prochainement dans ce sens afin de déterminer les modalités de mise en oeuvre d’une telle intégration.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/DEP.png" class="img-fluid figure-img"></p>
<figcaption>Interface de Digital Earth Pacific</figcaption>
</figure>
</div>
<section id="développement-dune-application-web-de-consultation-de-données" class="level5" data-number="3.2.2.2.1">
<h5 data-number="3.2.2.2.1" class="anchored" data-anchor-id="développement-dune-application-web-de-consultation-de-données"><span class="header-section-number">3.2.2.2.1</span> Développement d’une application web de consultation de données</h5>
<p>Nous souhaitons mettre a disposition d’utilisateur une interface de consultation simplifié et intuitive pour accéder aux données du <strong>dispositif sécheresse végétale</strong>. Cette application web pourrait permettre de visualiser les données de sécheresse dans leurs dimensions temporelle et spatiale. Le développement d’un telle application nécessite l’appui de partenaires locaux (Agence rurale, Chambre de l’agriculture de Nouvelle-Calédonie) pour définir les fonctionnalités à prévoir en cohérences à leurs besoins spécifiques et soutenir financièrement le ce dispositif.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/EO4DM-WEBMAP.jpg" class="img-fluid figure-img"></p>
<figcaption>Exemple de plateforme Web de consultation des résultats</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="livrables" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="livrables"><span class="header-section-number">3.2.3</span> Livrables</h3>
<ul>
<li>Etude gapfilling Landsat 7 <a href="#sec-gapfilling" class="quarto-xref">Section&nbsp;4.4.1</a></li>
<li>Etude pour le choix du DataCube (GEE, Sentinel Hub, Data-Terra, Digital Earth Pacific) <span class="math inline">\(\ref{sec-datacube}\)</span></li>
<li>Etude de faisabilité d’intégration des produits CHIRPS et&nbsp;SMAP dans la chaine Alerte sécheresse <span class="math inline">\(\ref{sec-chirps}\)</span></li>
<li>Etude pour l’intégration du capteur VIIRS en remplacement de MODIS <span class="math inline">\(\ref{sec-decoModis}\)</span></li>
<li>Document d’aide au contrôle qualité des données des chaines <a href="#sec-cq" class="quarto-xref">Section&nbsp;4.5</a></li>
<li>Présentation PGRSC (OperationalVegetationDroughtProcessing_PGRSC_Neuhauser_et_al_2023) <span class="math inline">\(\ref{sec-pgrsc}\)</span></li>
<li>Code source
<ul>
<li>chaine locale (documentation d’exploitation et documentation de code associées)</li>
<li>chaine globale (documentation d’exploitation et documentation de code associées)</li>
<li>chaine alerte (documentation d’exploitation et documentation de code associées)</li>
<li>chaine prévisionnelle - MFNC (documentation d’exploitation et documentation de code associées)</li>
<li>code source du calcul SPI et SPEI avec GEE via l’utilisation des données du programme CHIRPS (documentation de code associées)<br>
</li>
</ul></li>
<li>Données/fichiers produits en continu</li>
</ul>
<section id="nombre-de-fichiers-produit-à-ce-jour" class="level4" data-number="3.2.3.1">
<h4 data-number="3.2.3.1" class="anchored" data-anchor-id="nombre-de-fichiers-produit-à-ce-jour"><span class="header-section-number">3.2.3.1</span> Nombre de fichiers produit à ce jour</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Indice/indicateur</th>
<th style="text-align: center;">Source</th>
<th style="text-align: center;">Fréquence</th>
<th style="text-align: center;">Nombre de fichiers</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">NDVI/NDWI</td>
<td style="text-align: center;">Landsat 7 8 9/Sentinel 2</td>
<td style="text-align: center;">par décade</td>
<td style="text-align: center;"><strong>4816</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;">LST</td>
<td style="text-align: center;">MODIS</td>
<td style="text-align: center;">par décade</td>
<td style="text-align: center;"><strong>1724</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;">LST</td>
<td style="text-align: center;">MODIS</td>
<td style="text-align: center;">par mois</td>
<td style="text-align: center;"><strong>577</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;">SwI</td>
<td style="text-align: center;">ASCAT</td>
<td style="text-align: center;">par jour</td>
<td style="text-align: center;"><strong>6102</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;">SwI</td>
<td style="text-align: center;">ASCAT</td>
<td style="text-align: center;">par mois</td>
<td style="text-align: center;"><strong>205</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;">VHI</td>
<td style="text-align: center;">chaine global</td>
<td style="text-align: center;">par decade</td>
<td style="text-align: center;"><strong>864</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;">VHI</td>
<td style="text-align: center;">chaine global</td>
<td style="text-align: center;">par mois</td>
<td style="text-align: center;"><strong>290</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;">VAI</td>
<td style="text-align: center;">chaine locale</td>
<td style="text-align: center;">par decade</td>
<td style="text-align: center;"><strong>4020</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;">MAI</td>
<td style="text-align: center;">chaine alerte</td>
<td style="text-align: center;">par mois</td>
<td style="text-align: center;"><strong>206</strong></td>
</tr>
</tbody>
</table>
<p>Le volume de stockage nécessaire à la production de l’indicateur sur la Nouvelle-Calédonie a été estimé dans <a href="#fig-volume-stockage" class="quarto-xref">Figure&nbsp;8</a></p>
<div id="fig-volume-stockage" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-volume-stockage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ressources/tableau_volume.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-volume-stockage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Estimation des volumes de stockage nécessaire
</figcaption>
</figure>
</div>
</section>
</section>
<section id="réunions-et-échanges" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="réunions-et-échanges"><span class="header-section-number">3.2.4</span> Réunions et échanges</h3>
<ul>
<li>3 COPILS</li>
<li>2 restitutions des études réalisées</li>
<li>15 Ateliers de travail</li>
<li>1 réunion avec le conseil Scientifique de l’OEIL</li>
<li>3 visio-conférences avec les partenaires de la région pacifique</li>
</ul>
</section>
<section id="restitutions-publiques" class="level3" data-number="3.2.5">
<h3 data-number="3.2.5" class="anchored" data-anchor-id="restitutions-publiques"><span class="header-section-number">3.2.5</span> Restitutions publiques</h3>
<p>Une présentation de la chaine a été faite à la conférence du 27 Novembre au 1 Décembre 2023 à Fiji - PGRSC: An Operational Vegetation Drought Processing Chain based on Google Earth Engine satellite imagery and meteorological products. Cette conférence a retenue l’attention de <strong>250 participants</strong>. Le contenu de la présentation est disponible en annexe <span class="math inline">\(\ref{sec-pgrsc}\)</span></p>
<!--ANNEXES -->
<!-- c'est l'include pdf de latex qui intégre le titre car sinon il y a un saut de page provenant de quarto -->
</section>
</section>
</section>
<section id="sec-Annexes" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Annexes</h1>
{{&lt; pdf ressources/conventions/231205_Convention.pdf &gt;}}
<section id="sec-readmeEO4DM" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sec-readmeEO4DM"><span class="header-section-number">4.1</span> Documentation des chaines de traitement</h2>

</section>
<section id="sec-readmePrevision" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sec-readmePrevision"><span class="header-section-number">4.2</span> Documentation des chaines de traitement</h2>
<p>================================================================================ Vegetation Drought Index Forecast Program (R version) ================================================================================</p>
<p>Author: Alexandre Peltier Contact: alexandre.peltier@meteo.fr</p>
<p>================================================================================ Program Description ================================================================================</p>
<p>This program generates vegetation drought index forecasts for New Caledonia based on rainfall measurements from previous months and Global Drought Observatory (GDO) seasonal forecasts. The forecasts are generated using statistical models implemented in R.</p>
<p>================================================================================ Required R Packages ================================================================================</p>
<p>The program requires the following R packages to be installed:</p>
<ul>
<li>ncdf4</li>
<li>tidyr</li>
<li>dplyr</li>
<li>forcats</li>
<li>ordinal</li>
<li>sp</li>
<li>gstat</li>
<li>spacetime</li>
<li>rgdal</li>
<li>rgeos</li>
<li>maps</li>
<li>mapdata</li>
<li>mapproj</li>
<li>maptools</li>
<li>sf</li>
<li>curl</li>
<li>rvest</li>
<li>rlang</li>
</ul>
<p>You can install these packages using the <code>install.packages()</code> function in R.</p>
<p>================================================================================ Useful Functions ================================================================================</p>
<p>The program includes several custom functions for handling data retrieval from FTP servers, data processing, and modeling. These functions are documented within the code.</p>
<p>================================================================================ Data Sources and Repositories ================================================================================</p>
<ul>
<li><strong>GDO Data</strong>: Retrieved from the European Commission’s Joint Research Centre (JRC) Drought Observatory datasets.</li>
<li><strong>OKAPI Data</strong>: Retrieved from the French Meteorological Service (Météo-France) FTP server.</li>
<li><strong>Remote Sensing Data (VHI)</strong>: Retrieved from a local repository.</li>
<li><strong>Statistical Models</strong>: Ordinal logistic models are used for forecasting drought indices.</li>
</ul>
<p>================================================================================ Input Data Files ================================================================================</p>
<p>The program requires the following input data files:</p>
<ul>
<li><strong>VHI Data</strong>: Monthly Vegetation Health Index (VHI) data for New Caledonia.</li>
<li><strong>GDO Data</strong>: Global Drought Observatory (GDO) seasonal forecast data.</li>
<li><strong>OKAPI Data</strong>: Standardized Precipitation Index (SPI) data.</li>
<li><strong>Communal Contours Shapefile</strong>: Defines the boundaries of municipalities in New Caledonia.</li>
<li><strong>Mask File</strong>: Used for calculating the remote sensing index.</li>
</ul>
<p>================================================================================ Output Data Files ================================================================================</p>
<p>The program generates the following output data files:</p>
<ul>
<li><strong>Model Inputs</strong>: CSV file containing input data for statistical models.</li>
<li><strong>Forecast Probabilities</strong>: CSV file containing forecast probabilities.</li>
<li><strong>Vegetation Indices</strong>: CSV file containing vegetation drought indices.</li>
<li><strong>Rainfall Indices</strong>: CSV file containing rainfall indices.</li>
</ul>
<p>================================================================================ How to Run the Program ================================================================================</p>
<ol type="1">
<li>Ensure that all required R packages are installed.</li>
<li>Make sure that the necessary input data files are available.</li>
<li>Run the R script “Vegetation_Drought_Index_Forecast.R”.</li>
</ol>
<p>================================================================================ Disclaimer ================================================================================</p>
<p>This program is provided as-is, without any warranty, expressed or implied. The author is not responsible for any damages or losses arising from the use of this program.</p>
<p>================================================================================</p>
</section>
<section id="sec-dependencies" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="sec-dependencies"><span class="header-section-number">4.3</span> Dépendances python des chaines version 1.0.0</h2>

</section>
<section id="etudes-réalisées" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="etudes-réalisées"><span class="header-section-number">4.4</span> Etudes réalisées</h2>
<section id="sec-gapfilling" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="sec-gapfilling"><span class="header-section-number">4.4.1</span> Etude gapfilling Landsat 7</h3>
<p>L’étude réalisée sur le gapfilling des données Landsat 7 a permis de mettre en évidence l’efficacité de la méthode de gapfilling utilisée pour combler les données manquantes. Les résultats obtenus montrent une amélioration significative de la qualité des données après gapfilling. Les images obtenues après gapfilling présentent une cohérence spatiale et temporelle satisfaisante, ce qui permet d’obtenir des indicateurs de sécheresse plus fiables et précis.</p>
<p><img src="ressources/livrables/Gap-Filling_L7/capture/synthese_B3.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/focal%20median%20b3.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/focal_mean_b3.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/1_NDWI_GapFill.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/1_NDWI_Gapfill_then_NDWI.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/1_NDWI_Gapfill_comparaisons.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/2_QMASK_Gapfill_qmask.png" class="img-fluid"> <img src="ressources/livrables/Gap-Filling_L7/capture/2_QMASK_comparaison.png" class="img-fluid"></p>
{{&lt; pdf ressources/livrables/Note_synthese_DataCubes.pdf &gt;}}
<!--## chirps-->
</section>
</section>
<section id="sec-cq" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="sec-cq"><span class="header-section-number">4.5</span> Aide au contrôle qualité des données des chaines</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/CQ_global.png" class="img-fluid figure-img"></p>
<figcaption>Contrôle qualité des données de la chaine globale</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/CQ_LOCAL.png" class="img-fluid figure-img"></p>
<figcaption>Contrôle qualité des données de la chaine locale</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ressources/CQ_ALERT.png" class="img-fluid figure-img"></p>
<figcaption>Contrôle qualité des données de la chaine alerte</figcaption>
</figure>
</div>
</section>
<section id="restitution---pgrsc" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="restitution---pgrsc"><span class="header-section-number">4.6</span> Restitution - PGRSC</h2>
{{&lt; pdf ressources/presentation/OperationalVegetationDroughtProcessing_PGRSC_Neuhauser_et_al_2023.pdf &gt;}}
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Pour plus de détails concernant le projet EO4DroughtMonitoring veuillez consulter <a href="https://www.spaceclimateobservatory.org/fr/eo4droughtmonitoring">cette url</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Pour plus d’informations sur la licence BSD, veuillez consulter l’article correspondant sur <a href="https://fr.wikipedia.org/wiki/Licence_BSD">Wikipédia</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Space Climate Observatory - <a href="https://www.spaceclimateobservatory.org/eo4dm-anticipate-drought-periods">lien vers le projet</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Réutilisation</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/SA/deed.fr">CC BY SA</a></div></div></section><section class="quarto-appendix-contents" id="quarto-copyright"><h2 class="anchored quarto-appendix-heading">Droits d'auteur</h2><div class="quarto-appendix-contents"><div>OEIL - Observatoire de l'Environnement en Nouvelle-Calédonie, tous droits réservés</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>